// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.HazelcastSerializerRenderer

package org.maiaframework.gen.testing.sample.composite_pk

import com.hazelcast.nio.serialization.compact.CompactReader
import com.hazelcast.nio.serialization.compact.CompactSerializer
import com.hazelcast.nio.serialization.compact.CompactWriter
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readInstantNonNull
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readInt32NonNull
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readInt64NonNull
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readStringNonNull
import org.springframework.stereotype.Component
import java.time.ZoneOffset


@Component
class CompositePrimaryKeySerializer : CompactSerializer<CompositePrimaryKeyEntity> {


    override fun getTypeName(): String {

        return "composite_primary_key_entity"

    }


    override fun getCompactClass(): Class<CompositePrimaryKeyEntity> {

        return CompositePrimaryKeyEntity::class.java

    }


    override fun read(reader: CompactReader): CompositePrimaryKeyEntity {

        val createdTimestampUtc = reader.readInstantNonNull("createdTimestampUtc")
        val someInt = reader.readInt32NonNull("someInt")
        val someModifiableString = reader.readStringNonNull("someModifiableString")
        val someString = reader.readStringNonNull("someString")
        val version = reader.readInt64NonNull("version")

        return CompositePrimaryKeyEntity(
            createdTimestampUtc,
            someInt,
            someModifiableString,
            someString,
            version,
        )

    }


    override fun write(writer: CompactWriter, dto: CompositePrimaryKeyEntity) {

        writer.apply {

            writeTimestampWithTimezone("createdTimestampUtc", dto.createdTimestampUtc.atOffset(ZoneOffset.UTC))
            writeInt32("someInt", dto.someInt)
            writeString("someModifiableString", dto.someModifiableString)
            writeString("someString", dto.someString)
            writeInt64("version", dto.version)

        }

    }


}

