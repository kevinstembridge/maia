package org.maiaframework.gen.renderers

import org.maiaframework.gen.spec.definition.EnumDef

class EntityFieldEnumConstantsRenderer(private val fieldKey: String, private val enumDef: EnumDef) : AbstractSourceFileRenderer() {


    override fun renderedFilePath(): String {

        return this.fieldKey + "_options.jsx"

    }


    override fun renderSource(): String {

        appendLine("// This source was generated by the Mahana code generator")
        appendLine("// Renderer class: %s", javaClass)
        blankLine()
        appendLine("// These values are in the object format expected by")
        appendLine("// the Semantic UI Dropdown component. i.e. key, value, text.")
        appendLine("const %s_options = [", this.fieldKey)


        this.enumDef.enumValueDefs.forEach { enumValueDef ->
            appendLine("    {")
            appendLine("        'key': '%s',", enumValueDef.name)
            appendLine("        'value': '%s',", enumValueDef.name)
            appendLine("        'text': '%s'", enumValueDef.name)
            appendLine("    },")
        }

        appendLine("];")
        blankLine()
        appendLine("export default %s_options;", this.fieldKey)
        blankLine()

        return sourceCode.toString()

    }


}
