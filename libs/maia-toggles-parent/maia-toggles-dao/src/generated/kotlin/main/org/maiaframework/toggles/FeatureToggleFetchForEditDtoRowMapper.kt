// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.RowMapperRenderer

package org.maiaframework.toggles

import org.maiaframework.jdbc.MaiaRowMapper
import org.maiaframework.jdbc.ResultSetAdapter
import org.maiaframework.toggles.activation.ActivationStrategyDescriptor
import org.maiaframework.toggles.fields.ContactPerson
import org.maiaframework.toggles.fields.Description
import org.maiaframework.toggles.fields.InfoLink
import org.maiaframework.toggles.fields.TicketKey
import tools.jackson.core.type.TypeReference
import tools.jackson.databind.json.JsonMapper


class FeatureToggleFetchForEditDtoRowMapper(
    private val jsonMapper: JsonMapper
) : MaiaRowMapper<FeatureToggleFetchForEditDto> {


    override fun mapRow(rsa: ResultSetAdapter): FeatureToggleFetchForEditDto {

        return FeatureToggleFetchForEditDto(
            rsa.readString("activationStrategies") { jsonMapper.readValue(it, object : TypeReference<List<ActivationStrategyDescriptor>>() {}) },
            rsa.readString("attributes") { jsonMapper.readValue(it, object : TypeReference<Map<String, String>?>() {}) },
            rsa.readStringOrNull("comment"),
            rsa.readStringOrNull("contactPerson") { ContactPerson(it) },
            rsa.readInstant("createdTimestampUtc"),
            rsa.readStringOrNull("description") { Description(it) },
            rsa.readBoolean("enabled"),
            rsa.readString("featureName") { FeatureName(it) },
            rsa.readStringOrNull("infoLink") { InfoLink(it) },
            rsa.readString("lastModifiedByUsername"),
            rsa.readInstant("lastModifiedTimestampUtc"),
            rsa.readLocalDateOrNull("reviewDate"),
            rsa.readStringOrNull("ticketKey") { TicketKey(it) },
            rsa.readLong("version"),
        )

    }


}

