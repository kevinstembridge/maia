// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.HazelcastSerializerRenderer

package org.maiaframework.toggles.activation

import com.hazelcast.nio.serialization.compact.CompactReader
import com.hazelcast.nio.serialization.compact.CompactSerializer
import com.hazelcast.nio.serialization.compact.CompactWriter
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readListOfCompact
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readStringNonNull
import org.springframework.stereotype.Component


@Component
class ActivationStrategyDescriptorSerializer : CompactSerializer<ActivationStrategyDescriptor> {


    override fun getTypeName(): String {

        return "ActivationStrategyDescriptor"

    }


    override fun getCompactClass(): Class<ActivationStrategyDescriptor> {

        return ActivationStrategyDescriptor::class.java

    }


    override fun read(reader: CompactReader): ActivationStrategyDescriptor {

        val id = reader.readStringNonNull("id")
        val parameters = reader.readListOfCompact("parameters", ActivationStrategyParameter::class.java)

        return ActivationStrategyDescriptor(
            id,
            parameters,
        )

    }


    override fun write(writer: CompactWriter, dto: ActivationStrategyDescriptor) {

        writer.apply {

            writeString("id", dto.id)
            writeArrayOfCompact("parameters", dto.parameters.toTypedArray())

        }

    }


}

