// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.HazelcastSerializerRenderer

package org.maiaframework.toggles

import com.hazelcast.nio.serialization.compact.CompactReader
import com.hazelcast.nio.serialization.compact.CompactSerializer
import com.hazelcast.nio.serialization.compact.CompactWriter
import org.maiaframework.hazelcast.serializers.CompactReaderExtension.readStringNonNull
import org.springframework.stereotype.Component


@Component
class FeatureStateSerializer : CompactSerializer<FeatureStateHzDto> {


    override fun getTypeName(): String {

        return "FeatureState"

    }


    override fun getCompactClass(): Class<FeatureStateHzDto> {

        return FeatureStateHzDto::class.java

    }


    override fun read(reader: CompactReader): FeatureStateHzDto {

        val enabled = reader.readBoolean("enabled")
        val featureName = FeatureName(reader.readStringNonNull("featureName"))

        return FeatureStateHzDto(
            enabled,
            featureName,
        )

    }


    override fun write(writer: CompactWriter, dto: FeatureStateHzDto) {

        writer.apply {

            writeBoolean("enabled", dto.enabled)
            writeString("featureName", dto.featureName.value)

        }

    }


}

