// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.ui.CrudTableComponentRenderer
import { Component, ViewChild } from '@angular/core';
import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import {SimpleCrudService} from '@app/gen-components/org/maiaframework/showcase/simple/simple-crud.service';
import {SimpleTableComponent} from '@app/gen-components/org/maiaframework/showcase/simple/simple-table.component';
import {SimpleCreateDialogComponent} from '@app/gen-components/org/maiaframework/showcase/simple/simple-create-dialog.component';
import {SimpleDeleteDialogComponent} from '@app/gen-components/org/maiaframework/showcase/simple/simple-delete-dialog.component';
import {SimpleEditDialogComponent} from '@app/gen-components/org/maiaframework/showcase/simple/simple-edit-dialog.component';
import {SimpleTableDto} from '@app/gen-components/org/maiaframework/showcase/simple/SimpleTableDto';

@Component({
    imports: [SimpleTableComponent],
    selector: 'app-simple-crud-table',
    templateUrl: './simple-crud-table.component.html'
})
export class SimpleCrudTableComponent {

    @ViewChild(SimpleTableComponent) tableComponent: SimpleTableComponent;


    constructor(
        private crudService: SimpleCrudService,
        public dialog: MatDialog
    ) {}


    onAddButtonClicked() {

        const dialogRef = this.dialog.open(SimpleCreateDialogComponent, {
            width: '400px'
        });

        dialogRef.afterClosed().subscribe((result) => {
            if (result) {
                this.tableComponent.reapplyFilters();
            }
        });

    }


    onEdit(dto: SimpleTableDto) {

        const dialogRef = this.dialog.open(SimpleEditDialogComponent, {
            width: '400px',
            data: dto
        });

        dialogRef.afterClosed().subscribe(result => {
            if (result) {
                this.tableComponent.reapplyFilters();
            }
        });

    }


    onDelete(dto: SimpleTableDto) {

        const dialogRef = this.dialog.open(SimpleDeleteDialogComponent, {
            width: '400px',
            data: dto
        });

        dialogRef.afterClosed().subscribe(result => {
            if (result) {
                this.tableComponent.reapplyFilters();
            }
        });

    }


}
