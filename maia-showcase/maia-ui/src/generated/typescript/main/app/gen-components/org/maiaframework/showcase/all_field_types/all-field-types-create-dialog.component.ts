// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.ui.EntityFormComponentRenderer

import {Component, EventEmitter, Inject, OnInit, Output, signal} from '@angular/core';
import {FormControl, FormGroup, FormsModule, ReactiveFormsModule, Validators} from '@angular/forms';
import {MatAutocompleteModule} from '@angular/material/autocomplete';
import {MatButtonModule} from '@angular/material/button';
import {MatOptionModule} from '@angular/material/core';
import {MAT_DIALOG_DATA, MatDialog, MatDialogActions, MatDialogContent, MatDialogRef, MatDialogTitle} from '@angular/material/dialog';
import {MatFormFieldModule} from '@angular/material/form-field';
import {MatInputModule} from '@angular/material/input';
import {MatOption, MatSelect} from '@angular/material/select';
import {MatTooltip} from '@angular/material/tooltip';
import {AllFieldTypesCreateRequestDto} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesCreateRequestDto';
import {AllFieldTypesSomeIntTypeAsyncValidator} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesSomeIntTypeAsyncValidator';
import {AllFieldTypesSomeLongTypeAsyncValidator} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesSomeLongTypeAsyncValidator';
import {AllFieldTypesSomeStringAsyncValidator} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesSomeStringAsyncValidator';
import {AllFieldTypesSomeStringNullableAsyncValidator} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesSomeStringNullableAsyncValidator';
import {AllFieldTypesSomeStringTypeAsyncValidator} from '@app/gen-components/org/maiaframework/showcase/all_field_types/AllFieldTypesSomeStringTypeAsyncValidator';
import {AllFieldTypesCrudService} from '@app/gen-components/org/maiaframework/showcase/all_field_types/all-field-types-crud.service';
import {SomeEnum} from '@app/gen-components/org/maiaframework/showcase/enums/SomeEnum';
import {SomeEnumSelectOptions} from '@app/gen-components/org/maiaframework/showcase/enums/SomeEnumSelectOptions';
import {ProblemDetail} from '@app/models/ProblemDetail';
import {Observable, Subject, of} from 'rxjs';
import {catchError, debounceTime, distinctUntilChanged, filter, map, switchMap, tap} from 'rxjs/operators';


@Component({
    imports: [
        FormsModule,
        MatAutocompleteModule,
        MatButtonModule,
        MatDialogActions,
        MatDialogContent,
        MatDialogTitle,
        MatFormFieldModule,
        MatInputModule,
        MatOption,
        MatOptionModule,
        MatSelect,
        MatTooltip,
        ReactiveFormsModule,
    ],
    selector: 'app-all-field-types-create-dialog',
    styleUrls: ['./all-field-types-create-dialog.component.scss'],
    templateUrl: './all-field-types-create-dialog.component.html'
})
export class AllFieldTypesCreateDialogComponent implements OnInit {


    problemDetail = signal<ProblemDetail | null>(null);


    formGroup: FormGroup;


    constructor(
        public dialogRef: MatDialogRef<AllFieldTypesCreateDialogComponent>,
        private formService: AllFieldTypesCrudService,
        private allFieldTypesSomeIntTypeAsyncValidator: AllFieldTypesSomeIntTypeAsyncValidator,
        private allFieldTypesSomeLongTypeAsyncValidator: AllFieldTypesSomeLongTypeAsyncValidator,
        private allFieldTypesSomeStringAsyncValidator: AllFieldTypesSomeStringAsyncValidator,
        private allFieldTypesSomeStringNullableAsyncValidator: AllFieldTypesSomeStringNullableAsyncValidator,
        private allFieldTypesSomeStringTypeAsyncValidator: AllFieldTypesSomeStringTypeAsyncValidator,
    ) {

        this.formGroup = new FormGroup(
            {
                someBoolean: new FormControl('', { updateOn: 'change' }),
                someBooleanNullable: new FormControl('', { updateOn: 'change' }),
                someBooleanType: new FormControl('', { updateOn: 'change' }),
                someBooleanTypeNullable: new FormControl('', { updateOn: 'change' }),
                someBooleanTypeProvided: new FormControl('', { updateOn: 'change' }),
                someBooleanTypeProvidedNullable: new FormControl('', { updateOn: 'change' }),
                someInstant: new FormControl('', { updateOn: 'change' }),
                someInstantNullable: new FormControl('', { updateOn: 'change' }),
                someInstantModifiable: new FormControl('', { updateOn: 'change' }),
                someInstantModifiableNullable: new FormControl('', { updateOn: 'change' }),
                someInt: new FormControl('', { updateOn: 'change' }),
                someIntModifiable: new FormControl('', { updateOn: 'change' }),
                someIntNullable: new FormControl('', { updateOn: 'change' }),
                someIntType: new FormControl('', { updateOn: 'change', asyncValidators: [this.allFieldTypesSomeIntTypeAsyncValidator.validate.bind(this.allFieldTypesSomeIntTypeAsyncValidator)] }),
                someIntTypeNullable: new FormControl('', { updateOn: 'change' }),
                someIntTypeProvided: new FormControl('', { updateOn: 'change' }),
                someIntTypeProvidedNullable: new FormControl('', { updateOn: 'change' }),
                someLongType: new FormControl('', { updateOn: 'change', asyncValidators: [this.allFieldTypesSomeLongTypeAsyncValidator.validate.bind(this.allFieldTypesSomeLongTypeAsyncValidator)] }),
                someLongTypeNullable: new FormControl('', { updateOn: 'change' }),
                someLongTypeProvided: new FormControl('', { updateOn: 'change' }),
                someLongTypeProvidedNullable: new FormControl('', { updateOn: 'change' }),
                someLocalDateModifiable: new FormControl('', { updateOn: 'change' }),
                somePeriodModifiable: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)] }),
                somePeriodNullable: new FormControl('', { updateOn: 'change', validators: [Validators.maxLength(100)] }),
                someEnum: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)] }),
                someEnumNullable: new FormControl('', { updateOn: 'change', validators: [Validators.maxLength(100)] }),
                someString: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)], asyncValidators: [this.allFieldTypesSomeStringAsyncValidator.validate.bind(this.allFieldTypesSomeStringAsyncValidator)] }),
                someStringModifiable: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)] }),
                someStringNullable: new FormControl('', { updateOn: 'change', validators: [Validators.maxLength(100)], asyncValidators: [this.allFieldTypesSomeStringNullableAsyncValidator.validate.bind(this.allFieldTypesSomeStringNullableAsyncValidator)] }),
                someStringType: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)], asyncValidators: [this.allFieldTypesSomeStringTypeAsyncValidator.validate.bind(this.allFieldTypesSomeStringTypeAsyncValidator)] }),
                someStringTypeNullable: new FormControl('', { updateOn: 'change', validators: [Validators.maxLength(100)] }),
                someProvidedStringType: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)] }),
                someProvidedStringTypeNullable: new FormControl('', { updateOn: 'change', validators: [Validators.maxLength(100)] }),
                someListOfEnums: new FormControl('', { updateOn: 'change' }),
                someListOfInstants: new FormControl('', { updateOn: 'change' }),
                someListOfLocalDates: new FormControl('', { updateOn: 'change' }),
                someListOfPeriods: new FormControl('', { updateOn: 'change' }),
                someListOfStrings: new FormControl('', { updateOn: 'change' }),
                someListOfStringTypes: new FormControl('', { updateOn: 'change' }),
                someMapOfStringToInteger: new FormControl('', { updateOn: 'change' }),
                someMapOfStringTypeToStringType: new FormControl('', { updateOn: 'change' }),
                someDto: new FormControl('', { updateOn: 'change' }),
                someDtoNullable: new FormControl('', { updateOn: 'change' }),
                createdByUsername: new FormControl('', { updateOn: 'change', validators: [Validators.required, Validators.maxLength(100)] }),
            },
        );

    }


    ngOnInit() {

    }


    onSubmit() {

        this.problemDetail.set(null);

        if (this.formGroup.invalid) {
            return;
        }

        const requestDto = {
            someBoolean: this.formGroup.getRawValue().someBoolean,
            someBooleanType: this.formGroup.getRawValue().someBooleanType,
            someBooleanTypeProvided: this.formGroup.getRawValue().someBooleanTypeProvided,
            someDto: this.formGroup.getRawValue().someDto,
            someEnum: this.formGroup.getRawValue().someEnum,
            someInstant: this.formGroup.getRawValue().someInstant,
            someInstantModifiable: this.formGroup.getRawValue().someInstantModifiable,
            someInt: this.formGroup.getRawValue().someInt,
            someIntModifiable: this.formGroup.getRawValue().someIntModifiable,
            someIntType: this.formGroup.getRawValue().someIntType,
            someIntTypeProvided: this.formGroup.getRawValue().someIntTypeProvided,
            someListOfEnums: this.formGroup.getRawValue().someListOfEnums,
            someListOfInstants: this.formGroup.getRawValue().someListOfInstants,
            someListOfLocalDates: this.formGroup.getRawValue().someListOfLocalDates,
            someListOfPeriods: this.formGroup.getRawValue().someListOfPeriods,
            someListOfStringTypes: this.formGroup.getRawValue().someListOfStringTypes,
            someListOfStrings: this.formGroup.getRawValue().someListOfStrings,
            someLocalDateModifiable: this.formGroup.getRawValue().someLocalDateModifiable,
            someLongType: this.formGroup.getRawValue().someLongType,
            someLongTypeProvided: this.formGroup.getRawValue().someLongTypeProvided,
            someMapOfStringToInteger: this.formGroup.getRawValue().someMapOfStringToInteger,
            someMapOfStringTypeToStringType: this.formGroup.getRawValue().someMapOfStringTypeToStringType,
            somePeriodModifiable: this.formGroup.getRawValue().somePeriodModifiable,
            someProvidedStringType: this.formGroup.getRawValue().someProvidedStringType,
            someString: this.formGroup.getRawValue().someString,
            someStringModifiable: this.formGroup.getRawValue().someStringModifiable,
            someStringType: this.formGroup.getRawValue().someStringType,
            someBooleanNullable: this.formGroup.getRawValue().someBooleanNullable,
            someBooleanTypeNullable: this.formGroup.getRawValue().someBooleanTypeNullable,
            someBooleanTypeProvidedNullable: this.formGroup.getRawValue().someBooleanTypeProvidedNullable,
            someDtoNullable: this.formGroup.getRawValue().someDtoNullable,
            someEnumNullable: this.formGroup.getRawValue().someEnumNullable,
            someInstantModifiableNullable: this.formGroup.getRawValue().someInstantModifiableNullable,
            someInstantNullable: this.formGroup.getRawValue().someInstantNullable,
            someIntNullable: this.formGroup.getRawValue().someIntNullable,
            someIntTypeNullable: this.formGroup.getRawValue().someIntTypeNullable,
            someIntTypeProvidedNullable: this.formGroup.getRawValue().someIntTypeProvidedNullable,
            someLongTypeNullable: this.formGroup.getRawValue().someLongTypeNullable,
            someLongTypeProvidedNullable: this.formGroup.getRawValue().someLongTypeProvidedNullable,
            somePeriodNullable: this.formGroup.getRawValue().somePeriodNullable,
            someProvidedStringTypeNullable: this.formGroup.getRawValue().someProvidedStringTypeNullable,
            someStringNullable: this.formGroup.getRawValue().someStringNullable,
            someStringTypeNullable: this.formGroup.getRawValue().someStringTypeNullable,
        } as AllFieldTypesCreateRequestDto;

        this.formService.create(requestDto)
            .subscribe({
                next: () => {
                    this.dialogRef.close(true);
                },
                error: err => {
                    this.problemDetail.set(err.error);
                }
            });

    }


    onCancel(): void {
        this.dialogRef.close();
    }


}
