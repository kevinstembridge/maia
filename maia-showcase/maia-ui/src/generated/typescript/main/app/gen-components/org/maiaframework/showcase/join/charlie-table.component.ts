// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.ui.DtoHtmlAgGridTableComponentRenderer
import { DecimalPipe } from '@angular/common';
import { Component, EventEmitter, Output } from '@angular/core';
import { AuthService } from '@app/auth/auth.service';

import {CharlieTableService} from '@app/gen-components/org/maiaframework/showcase/join/charlie-table.service';
import { CharlieTableDto } from './CharlieTableDto';
import { MatIconModule } from '@angular/material/icon';
import { MatButtonModule } from '@angular/material/button';
import { FormsModule } from '@angular/forms';
import { AgGridAngular } from 'ag-grid-angular';
import { agGridTheme } from '@app/themes/ag-grid-theme';
import { ColDef, FilterModel, GridApi, GridReadyEvent, ICellRendererParams, RowModelType } from 'ag-grid-community';
import {CharlieTableAgGridDatasource} from '@app/gen-components/org/maiaframework/showcase/join/CharlieTableAgGridDatasource';


@Component({
    imports: [AgGridAngular, FormsModule, MatButtonModule, MatIconModule],
    providers: [CharlieTableService, DecimalPipe],
    selector: 'app-charlie-table',
    templateUrl: './charlie-table.component.html'
})
export class CharlieTableComponent {


    public columnDefs: ColDef[] = [
        { field: 'tableStringFromCharlie', cellDataType: 'text', filter: true },
        { field: 'tableStringFromBravo', cellDataType: 'text', filter: true },
        { field: 'tableStringFromAlpha', cellDataType: 'text', filter: true },
        { field: 'createdTimestampUtc', cellDataType: 'text', filter: true },
    ];

    public defaultColDef: ColDef = {
        filter: true,
        flex: 1,
        floatingFilter: true,
        minWidth: 100,
        sortable: true
    };


    public rowBuffer = 0;


    public rowSelection = {
         mode: 'multiRow',
    };
    
    
    public agGridTheme = agGridTheme;


    public rowModelType: RowModelType = 'infinite';


    public cacheBlockSize = 100;


    public cacheOverflowSize = 2;


    public maxConcurrentDatasourceRequests = 1;


    public infiniteInitialRowCount = 1000;


    public maxBlocksInCache = 10;


    public rowData!: CharlieTableDto[];


    private gridApi!: GridApi<CharlieTableDto>;


    constructor(
        private datasource: CharlieTableAgGridDatasource,
        private authService: AuthService
    ) {}


    onGridReady(params: GridReadyEvent<CharlieTableDto>) {

        this.gridApi = params.api;
        params.api?.setGridOption('datasource', this.datasource);

    }

    reapplyFilters() {

        this.gridApi.onFilterChanged();

    }


    getFilterModel(): FilterModel {

        return this.gridApi.getFilterModel();

    }


}
