// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.ui.EntityDeleteDialogComponentRenderer

import { Component, Inject, signal } from '@angular/core';
import { MatDialog, MatDialogRef, MAT_DIALOG_DATA, MatDialogTitle, MatDialogContent, MatDialogActions } from '@angular/material/dialog';
import {CharlieCrudService} from '@app/gen-components/org/maiaframework/showcase/join/charlie-crud.service';
import { ProblemDetail } from '@app/gen-components/common/model/ProblemDetail';
import { MatButtonModule } from '@angular/material/button';
import { MatFormFieldModule } from '@angular/material/form-field';


@Component({
    imports: [MatDialogTitle, MatDialogContent, MatFormFieldModule, MatDialogActions, MatButtonModule],
    selector: 'app-charlie-delete-dialog',
    templateUrl: './charlie-delete-dialog.component.html'
})
export class CharlieDeleteDialogComponent {


    message?: string;


    problemDetail = signal<ProblemDetail | null>(null);


    constructor(
        public dialogRef: MatDialogRef<CharlieDeleteDialogComponent>,
        @Inject(MAT_DIALOG_DATA) private dto: any,
        private crudService: CharlieCrudService
    ) {}


    onYes() {
        this.crudService.delete(this.dto.id).subscribe({
            next: (_) => {
                this.dialogRef.close(true);
            },
            error: (err) => {
                this.problemDetail.set(err.error);
            }
        });
    }


    onCancel() {
        this.dialogRef.close();
    }


}
