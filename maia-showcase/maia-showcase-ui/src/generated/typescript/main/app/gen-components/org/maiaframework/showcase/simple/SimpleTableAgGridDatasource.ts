// This source was generated by the Maia Framework code generator
// Renderer class: class org.maiaframework.gen.renderers.ui.AgGridDatasourceRenderer

import {Injectable} from '@angular/core';
import {HttpClient} from '@angular/common/http';
import {IDatasource, IGetRowsParams} from 'ag-grid-community';
import {SimpleTableDto} from '@app/gen-components/org/maiaframework/showcase/simple/SimpleTableDto';
import {SearchResultPage} from '@app/gen-components/common/model/SearchResultPage';


@Injectable({providedIn: 'root'})
export class SimpleTableAgGridDatasource implements IDatasource {


    rowCount?: number = undefined;


    constructor(
        private http: HttpClient
    ) { }


    getRows(params: IGetRowsParams): void {

        this.http.post<SearchResultPage<SimpleTableDto>>(
            '/api/simple_table/search',
            params
        ).subscribe({
           next: searchResultPage => params.successCallback(searchResultPage.results, searchResultPage.totalResultCount)
        });

    }


}
